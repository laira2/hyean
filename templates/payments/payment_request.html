<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Request</title>
    <script src="https://cdn.jsdelivr.net/npm/@portone/browser-sdk@latest/dist/portone.min.js"></script>
</head>
<body>
    <button id="payment-button">결제하기</button>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof PortOne !== 'undefined') {
                const portone = new PortOne('YOUR_PORTONE_STORE_ID'); // 고객사 식별코드로 초기화
                const orderId = 'YOUR_ORDER_ID'; // 주문 ID

                const requestPayment = () => {
                    portone.requestPayment({
                        pg: 'tosspayments', // 토스페이먼트 선택
                        payMethod: 'card', // 결제 수단
                        merchantUid: orderId, // 상점에서 생성한 고유 주문번호
                        amount: 10000, // 결제 금액
                        name: '주문명',
                        buyerName: '구매자명',
                        buyerTel: '010-1234-5678',
                        buyerEmail: 'buyer@example.com',
                        // 기타 필요한 결제 정보
                    }, (response) => {
                        if (response.success) {
                            // 결제 성공 처리
                            console.log('결제 성공:', response);
                            window.location.href = '/payment/success/';
                        } else {
                            // 결제 실패 처리
                            console.log('결제 실패:', response);
                            window.location.href = '/payment/fail/';
                        }
                    });
                };

                document.getElementById('payment-button').addEventListener('click', requestPayment);
            } else {
                console.error('PortOne is not defined');
                alert('결제 모듈을 불러오는 데 실패했습니다. 페이지를 새로고침 하거나 나중에 다시 시도해 주세요.');
                // 추가적인 Fallback 처리 코드
            }
        });
    </script>
</body>
</html>
